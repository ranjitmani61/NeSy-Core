# ──────────────────────────────────────────────────────────────────
# NeSy-Core — Medical Domain Configuration
# Domain: medical
#
# Stricter thresholds, higher doubt sensitivity, immutable safety
# rules.  Designed for clinical decision support where false
# negatives carry patient-safety risk.
# ──────────────────────────────────────────────────────────────────

domain: medical

symbolic:
  max_forward_chain_depth: 30      # shorter chains for interpretability
  hard_rule_weight_threshold: 0.95
  satisfiability_max_steps: 500
  betti_warn_threshold: 1          # any disconnection is suspicious

nsi:
  context_thresholds:
    medical: 0.35                  # primary domain threshold
    legal: 0.30
    code: 0.25
    general: 0.15
  max_null_items_returned: 100     # surface more absences in medical
  type3_weight_cutoff: 0.50        # lower cutoff → catch more critical nulls
  type2_weight_cutoff: 0.30

metacognition:
  doubt_threshold: 0.70            # higher bar before trusting output
  reliable_threshold: 0.80         # stricter reliability gate
  strict_mode: true                # raise CriticalNullViolation on Type3
  trace_all_steps: true
  calibration_min_samples: 200     # more samples for medical calibration
  shadow_enabled: true             # enforce shadow reasoning
  shadow_critical_distance: 1      # d<=1 triggers policy action
  shadow_policy: flag              # downgrade to FLAGGED on CRITICAL shadow
  shadow_apply_domains:            # domains where shadow enforcement applies
    - medical
    - legal
  shadow_escalation_flag_prefix: SHADOW
  shadow_max_exact_facts: 15
  shadow_max_depth: 7

continual:
  lambda_ewc: 5000.0               # stronger EWC — preserve safety knowledge
  replay_buffer_size: 1000
  consolidation_trigger: 50        # consolidate more frequently

deployment:
  quantization_bits: 8
  max_batch_size: 16
  inference_timeout_ms: 300        # allow more time for thorough reasoning
  npu_enabled: false
  lite_mode: false
